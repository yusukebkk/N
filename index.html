<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nスペシャル</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #f5f5f5;
    color: #333;
    padding: 16px;
    max-width: 480px;
    margin: 0 auto;
  }
  h1 {
    font-size: 1.2rem;
    text-align: center;
    margin-bottom: 16px;
  }
  .input-group {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
  }
  .input-group label {
    flex: 1;
    display: flex;
    flex-direction: column;
    font-size: 0.85rem;
    font-weight: 600;
  }
  .input-group input {
    margin-top: 4px;
    padding: 10px;
    font-size: 1rem;
    border: 2px solid #ccc;
    border-radius: 8px;
    text-align: center;
    -webkit-appearance: none;
    -moz-appearance: textfield;
  }
  .input-group input::-webkit-inner-spin-button,
  .input-group input::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  .input-group input:focus {
    outline: none;
    border-color: #4a90d9;
  }
  .results { display: none; }
  .results h2 {
    font-size: 1rem;
    margin-bottom: 10px;
  }
  .result-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #fff;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }
  .result-label {
    font-size: 0.85rem;
    color: #888;
    min-width: 80px;
  }
  .result-value {
    font-size: 1.1rem;
    font-weight: 600;
    flex: 1;
    text-align: right;
    margin-right: 10px;
    user-select: all;
    -webkit-user-select: all;
  }
  .copy-btn {
    padding: 6px 12px;
    font-size: 0.8rem;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 6px;
    cursor: pointer;
    white-space: nowrap;
  }
  .copy-btn:active { background: #ddd; }
  .copy-btn.copied {
    background: #d4edda;
    border-color: #a3d9b1;
    color: #276749;
  }
</style>
</head>
<body>

<h1>Nスペシャル</h1>

<div class="input-group">
  <label>最安値
    <input type="number" id="minVal" step="any" placeholder="例: 100">
  </label>
  <label>最高値
    <input type="number" id="maxVal" step="any" placeholder="例: 200">
  </label>
</div>

<div class="results" id="results">
  <h2>計算結果</h2>
  <div id="rows"></div>
</div>

<script>
const targets = [1.09, 0.9, 0.09, -0.09];
const minEl = document.getElementById('minVal');
const maxEl = document.getElementById('maxVal');
const resultsEl = document.getElementById('results');
const rowsEl = document.getElementById('rows');

function calculate() {
  const min = parseFloat(minEl.value);
  const max = parseFloat(maxEl.value);
  if (isNaN(min) || isNaN(max) || min === max) {
    resultsEl.style.display = 'none';
    return;
  }

  const range = max - min;
  rowsEl.innerHTML = '';

  targets.forEach(t => {
    const val = parseFloat((min + t * range).toFixed(2));
    const row = document.createElement('div');
    row.className = 'result-row';
    row.innerHTML =
      '<span class="result-label">' + t + ' →</span>' +
      '<span class="result-value">' + val + '</span>' +
      '<button class="copy-btn" data-val="' + val + '">コピー</button>';
    rowsEl.appendChild(row);
  });

  resultsEl.style.display = 'block';

  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      navigator.clipboard.writeText(this.dataset.val).then(() => {
        this.textContent = 'OK';
        this.classList.add('copied');
        setTimeout(() => { this.textContent = 'コピー'; this.classList.remove('copied'); }, 1000);
      });
    });
  });
}

minEl.addEventListener('input', calculate);
maxEl.addEventListener('input', calculate);

</script>

</body>
</html>
